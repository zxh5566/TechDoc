
【Redis过期键删除策略】


 >> 被动删除：当读/写一个已经过期的key时，会触发惰性删除策略，直接删除掉这个过期key

 >> 主动删除：由于惰性删除策略无法保证冷数据及时删掉，所以Redis会定期主动淘汰一批已过期的key

 >> 当前已用内存超过maxmemory限定时，触发主动清理策略


 //////////// 被动删除 ////////////


 >> 只有key被操作时(如GET)，REDIS才会被动检查该key是否过期，如果过期则删除



 //////////// 定期主动清理策略 ////////////


 >> Redis会周期性的随机测试一批设置了过期时间的key并进行处理。测试到的已过期的key将被删除。

 >> 典型的方式为,Redis每秒做10次如下的步骤：

 >> 随机测试100个设置了过期时间的key

 >> 删除所有发现的已过期的key

 >> 若删除的key超过25个则重复步骤1

 >> 配置文件中hz决定每秒扫描key的最小个数

 >> hz调大将会提高Redis主动淘汰的频率，冷数据占用内存过大，可将这个值调大，建议不超过100


 //////////// maxmemory主动清理策略 ////////////


 >> 当前已用内存超过maxmemory限定时，触发主动清理策略

 >> volatile-lru：只对设置了过期时间的key进行LRU（默认值）

 >> allkeys-lru ： 删除lru算法的key

 >> volatile-random：随机删除即将过期key

 >> allkeys-random：随机删除

 >> volatile-ttl ： 删除即将过期的

 >> noeviction ： 永不过期